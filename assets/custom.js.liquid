/*-----------------------------------------------------------------------------/
/ Custom Theme JS
/-----------------------------------------------------------------------------*/

// Insert any custom theme js here...

/* Custom Slider */
$.fn.hasAttr = function(name){
  return this.attr(name) !== undefined;
}

$(document).ready(function(){
  $('.custom-product-slide').slick({
    dots: true,
	infinite: true,
    autoplay: true,
    autoplaySpeed: 5000,
	speed: 300,
	slidesToShow: 1,
  });
  
  $('.custom-review-slide').slick({
    slidesToShow: 3,
    slidesToScroll: 1,
    infinite: true,
    speed: 300,
    responsive: [
      {
        breakpoint: 1024,
        settings: {
          slidesToShow: 3,
        }
      },
      {
        breakpoint: 600,
        settings: {
          slidesToShow: 2,
        }
      },
      {
        breakpoint: 480,
        settings: {
          slidesToShow: 1,
        }
      }
	]
  });
  
  /* Product Accordion */  
  
  $(document).on('click','[data-accordion]', function(){
    var hasOpened = $(this).hasClass('active');
    if(!hasOpened){
      $('[data-accordion]').removeClass('active');
      $(this).addClass('active');
    }
  });
  
  /* Product Quanity */
  
  $(document).on('click','.product__add-to-cart-button.btn--to-secondary-transitioned',function(){
    $quantity = $(this).parents('.product-form').find("[data-cart-item-input-quantity]");
    $quantity.val(1);
    $primary_text.html('Add 1 to basket');

  });
  
  $(document).on('click','.product-quantity-button',function(){
    $quantity = $(this).parents('.product-form').find("[data-cart-item-input-quantity]");
    $primary_text = $(this).parents('.product-form').find("[data-cart-primary-submit-text]");
    var quantity = parseInt($quantity.val());

    if($(this).hasAttr("quantity-minus-icon")){
      quantity = quantity != 1 ? quantity - 1 : 1;
    }
    
    if($(this).hasAttr("quantity-plus-icon")){
      quantity = quantity + 1;
    }
   
	$quantity.val(quantity);
    $primary_text.html('Add '+quantity+' to basket');
  });



// ADDED BY ROUSNAY


/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;(function (factory) {
  var registeredInModuleLoader;
  if (typeof define === 'function' && define.amd) {
    define(factory);
    registeredInModuleLoader = true;
  }
  if (typeof exports === 'object') {
    module.exports = factory();
    registeredInModuleLoader = true;
  }
  if (!registeredInModuleLoader) {
    var OldCookies = window.Cookies;
    var api = window.Cookies = factory();
    api.noConflict = function () {
      window.Cookies = OldCookies;
      return api;
    };
  }
}(function () {
  function extend () {
    var i = 0;
    var result = {};
    for (; i < arguments.length; i++) {
      var attributes = arguments[ i ];
      for (var key in attributes) {
        result[key] = attributes[key];
      }
    }
    return result;
  }

  function init (converter) {
    function api (key, value, attributes) {
      if (typeof document === 'undefined') {
        return;
      }

      // Write

      if (arguments.length > 1) {
        attributes = extend({
          path: '/'
        }, api.defaults, attributes);

        if (typeof attributes.expires === 'number') {
          attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);
        }

        // We're using "expires" because "max-age" is not supported by IE
        attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';

        try {
          var result = JSON.stringify(value);
          if (/^[\{\[]/.test(result)) {
            value = result;
          }
        } catch (e) {}

        value = converter.write ?
          converter.write(value, key) :
          encodeURIComponent(String(value))
            .replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);

        key = encodeURIComponent(String(key))
          .replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)
          .replace(/[\(\)]/g, escape);

        var stringifiedAttributes = '';
        for (var attributeName in attributes) {
          if (!attributes[attributeName]) {
            continue;
          }
          stringifiedAttributes += '; ' + attributeName;
          if (attributes[attributeName] === true) {
            continue;
          }

          // Considers RFC 6265 section 5.2:
          // ...
          // 3.  If the remaining unparsed-attributes contains a %x3B (";")
          //     character:
          // Consume the characters of the unparsed-attributes up to,
          // not including, the first %x3B (";") character.
          // ...
          stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];
        }

        return (document.cookie = key + '=' + value + stringifiedAttributes);
      }

      // Read

      var jar = {};
      var decode = function (s) {
        return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
      };
      // To prevent the for loop in the first place assign an empty array
      // in case there are no cookies at all.
      var cookies = document.cookie ? document.cookie.split('; ') : [];
      var i = 0;

      for (; i < cookies.length; i++) {
        var parts = cookies[i].split('=');
        var cookie = parts.slice(1).join('=');

        if (!this.json && cookie.charAt(0) === '"') {
          cookie = cookie.slice(1, -1);
        }

        try {
          var name = decode(parts[0]);
          cookie = (converter.read || converter)(cookie, name) ||
            decode(cookie);

          if (this.json) {
            try {
              cookie = JSON.parse(cookie);
            } catch (e) {}
          }

          jar[name] = cookie;

          if (key === name) {
            break;
          }
        } catch (e) {}
      }

      return key ? jar[key] : jar;
    }

    api.set = api;
    api.get = function (key) {
      return api.call(api, key);
    };
    api.getJSON = function (key) {
      return api.call({
        json: true
      }, key);
    };
    api.remove = function (key, attributes) {
      api(key, '', extend(attributes, {
        expires: -1
      }));
    };

    api.defaults = {};

    api.withConverter = init;

    return api;
  }

  return init(function () {});
}));




/*!
Waypoints - 4.0.1
Copyright Â© 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
(function() {
  'use strict'

  var keyCounter = 0
  var allWaypoints = {}

  /* http://imakewebthings.com/waypoints/api/waypoint */
  function Waypoint(options) {
    if (!options) {
      throw new Error('No options passed to Waypoint constructor')
    }
    if (!options.element) {
      throw new Error('No element option passed to Waypoint constructor')
    }
    if (!options.handler) {
      throw new Error('No handler option passed to Waypoint constructor')
    }

    this.key = 'waypoint-' + keyCounter
    this.options = Waypoint.Adapter.extend({}, Waypoint.defaults, options)
    this.element = this.options.element
    this.adapter = new Waypoint.Adapter(this.element)
    this.callback = options.handler
    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'
    this.enabled = this.options.enabled
    this.triggerPoint = null
    this.group = Waypoint.Group.findOrCreate({
      name: this.options.group,
      axis: this.axis
    })
    this.context = Waypoint.Context.findOrCreateByElement(this.options.context)

    if (Waypoint.offsetAliases[this.options.offset]) {
      this.options.offset = Waypoint.offsetAliases[this.options.offset]
    }
    this.group.add(this)
    this.context.add(this)
    allWaypoints[this.key] = this
    keyCounter += 1
  }

  /* Private */
  Waypoint.prototype.queueTrigger = function(direction) {
    this.group.queueTrigger(this, direction)
  }

  /* Private */
  Waypoint.prototype.trigger = function(args) {
    if (!this.enabled) {
      return
    }
    if (this.callback) {
      this.callback.apply(this, args)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy */
  Waypoint.prototype.destroy = function() {
    this.context.remove(this)
    this.group.remove(this)
    delete allWaypoints[this.key]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable */
  Waypoint.prototype.disable = function() {
    this.enabled = false
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable */
  Waypoint.prototype.enable = function() {
    this.context.refresh()
    this.enabled = true
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/next */
  Waypoint.prototype.next = function() {
    return this.group.next(this)
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/previous */
  Waypoint.prototype.previous = function() {
    return this.group.previous(this)
  }

  /* Private */
  Waypoint.invokeAll = function(method) {
    var allWaypointsArray = []
    for (var waypointKey in allWaypoints) {
      allWaypointsArray.push(allWaypoints[waypointKey])
    }
    for (var i = 0, end = allWaypointsArray.length; i < end; i++) {
      allWaypointsArray[i][method]()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/destroy-all */
  Waypoint.destroyAll = function() {
    Waypoint.invokeAll('destroy')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/disable-all */
  Waypoint.disableAll = function() {
    Waypoint.invokeAll('disable')
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/enable-all */
  Waypoint.enableAll = function() {
    Waypoint.Context.refreshAll()
    for (var waypointKey in allWaypoints) {
      allWaypoints[waypointKey].enabled = true
    }
    return this
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/refresh-all */
  Waypoint.refreshAll = function() {
    Waypoint.Context.refreshAll()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-height */
  Waypoint.viewportHeight = function() {
    return window.innerHeight || document.documentElement.clientHeight
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/viewport-width */
  Waypoint.viewportWidth = function() {
    return document.documentElement.clientWidth
  }

  Waypoint.adapters = []

  Waypoint.defaults = {
    context: window,
    continuous: true,
    enabled: true,
    group: 'default',
    horizontal: false,
    offset: 0
  }

  Waypoint.offsetAliases = {
    'bottom-in-view': function() {
      return this.context.innerHeight() - this.adapter.outerHeight()
    },
    'right-in-view': function() {
      return this.context.innerWidth() - this.adapter.outerWidth()
    }
  }

  window.Waypoint = Waypoint
}())
;(function() {
  'use strict'

  function requestAnimationFrameShim(callback) {
    window.setTimeout(callback, 1000 / 60)
  }

  var keyCounter = 0
  var contexts = {}
  var Waypoint = window.Waypoint
  var oldWindowLoad = window.onload

  /* http://imakewebthings.com/waypoints/api/context */
  function Context(element) {
    this.element = element
    this.Adapter = Waypoint.Adapter
    this.adapter = new this.Adapter(element)
    this.key = 'waypoint-context-' + keyCounter
    this.didScroll = false
    this.didResize = false
    this.oldScroll = {
      x: this.adapter.scrollLeft(),
      y: this.adapter.scrollTop()
    }
    this.waypoints = {
      vertical: {},
      horizontal: {}
    }

    element.waypointContextKey = this.key
    contexts[element.waypointContextKey] = this
    keyCounter += 1
    if (!Waypoint.windowContext) {
      Waypoint.windowContext = true
      Waypoint.windowContext = new Context(window)
    }

    this.createThrottledScrollHandler()
    this.createThrottledResizeHandler()
  }

  /* Private */
  Context.prototype.add = function(waypoint) {
    var axis = waypoint.options.horizontal ? 'horizontal' : 'vertical'
    this.waypoints[axis][waypoint.key] = waypoint
    this.refresh()
  }

  /* Private */
  Context.prototype.checkEmpty = function() {
    var horizontalEmpty = this.Adapter.isEmptyObject(this.waypoints.horizontal)
    var verticalEmpty = this.Adapter.isEmptyObject(this.waypoints.vertical)
    var isWindow = this.element == this.element.window
    if (horizontalEmpty && verticalEmpty && !isWindow) {
      this.adapter.off('.waypoints')
      delete contexts[this.key]
    }
  }

  /* Private */
  Context.prototype.createThrottledResizeHandler = function() {
    var self = this

    function resizeHandler() {
      self.handleResize()
      self.didResize = false
    }

    this.adapter.on('resize.waypoints', function() {
      if (!self.didResize) {
        self.didResize = true
        Waypoint.requestAnimationFrame(resizeHandler)
      }
    })
  }

  /* Private */
  Context.prototype.createThrottledScrollHandler = function() {
    var self = this
    function scrollHandler() {
      self.handleScroll()
      self.didScroll = false
    }

    this.adapter.on('scroll.waypoints', function() {
      if (!self.didScroll || Waypoint.isTouch) {
        self.didScroll = true
        Waypoint.requestAnimationFrame(scrollHandler)
      }
    })
  }

  /* Private */
  Context.prototype.handleResize = function() {
    Waypoint.Context.refreshAll()
  }

  /* Private */
  Context.prototype.handleScroll = function() {
    var triggeredGroups = {}
    var axes = {
      horizontal: {
        newScroll: this.adapter.scrollLeft(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left'
      },
      vertical: {
        newScroll: this.adapter.scrollTop(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      var isForward = axis.newScroll > axis.oldScroll
      var direction = isForward ? axis.forward : axis.backward

      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        if (waypoint.triggerPoint === null) {
          continue
        }
        var wasBeforeTriggerPoint = axis.oldScroll < waypoint.triggerPoint
        var nowAfterTriggerPoint = axis.newScroll >= waypoint.triggerPoint
        var crossedForward = wasBeforeTriggerPoint && nowAfterTriggerPoint
        var crossedBackward = !wasBeforeTriggerPoint && !nowAfterTriggerPoint
        if (crossedForward || crossedBackward) {
          waypoint.queueTrigger(direction)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    for (var groupKey in triggeredGroups) {
      triggeredGroups[groupKey].flushTriggers()
    }

    this.oldScroll = {
      x: axes.horizontal.newScroll,
      y: axes.vertical.newScroll
    }
  }

  /* Private */
  Context.prototype.innerHeight = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportHeight()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerHeight()
  }

  /* Private */
  Context.prototype.remove = function(waypoint) {
    delete this.waypoints[waypoint.axis][waypoint.key]
    this.checkEmpty()
  }

  /* Private */
  Context.prototype.innerWidth = function() {
    /*eslint-disable eqeqeq */
    if (this.element == this.element.window) {
      return Waypoint.viewportWidth()
    }
    /*eslint-enable eqeqeq */
    return this.adapter.innerWidth()
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-destroy */
  Context.prototype.destroy = function() {
    var allWaypoints = []
    for (var axis in this.waypoints) {
      for (var waypointKey in this.waypoints[axis]) {
        allWaypoints.push(this.waypoints[axis][waypointKey])
      }
    }
    for (var i = 0, end = allWaypoints.length; i < end; i++) {
      allWaypoints[i].destroy()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-refresh */
  Context.prototype.refresh = function() {
    /*eslint-disable eqeqeq */
    var isWindow = this.element == this.element.window
    /*eslint-enable eqeqeq */
    var contextOffset = isWindow ? undefined : this.adapter.offset()
    var triggeredGroups = {}
    var axes

    this.handleScroll()
    axes = {
      horizontal: {
        contextOffset: isWindow ? 0 : contextOffset.left,
        contextScroll: isWindow ? 0 : this.oldScroll.x,
        contextDimension: this.innerWidth(),
        oldScroll: this.oldScroll.x,
        forward: 'right',
        backward: 'left',
        offsetProp: 'left'
      },
      vertical: {
        contextOffset: isWindow ? 0 : contextOffset.top,
        contextScroll: isWindow ? 0 : this.oldScroll.y,
        contextDimension: this.innerHeight(),
        oldScroll: this.oldScroll.y,
        forward: 'down',
        backward: 'up',
        offsetProp: 'top'
      }
    }

    for (var axisKey in axes) {
      var axis = axes[axisKey]
      for (var waypointKey in this.waypoints[axisKey]) {
        var waypoint = this.waypoints[axisKey][waypointKey]
        var adjustment = waypoint.options.offset
        var oldTriggerPoint = waypoint.triggerPoint
        var elementOffset = 0
        var freshWaypoint = oldTriggerPoint == null
        var contextModifier, wasBeforeScroll, nowAfterScroll
        var triggeredBackward, triggeredForward

        if (waypoint.element !== waypoint.element.window) {
          elementOffset = waypoint.adapter.offset()[axis.offsetProp]
        }

        if (typeof adjustment === 'function') {
          adjustment = adjustment.apply(waypoint)
        }
        else if (typeof adjustment === 'string') {
          adjustment = parseFloat(adjustment)
          if (waypoint.options.offset.indexOf('%') > - 1) {
            adjustment = Math.ceil(axis.contextDimension * adjustment / 100)
          }
        }

        contextModifier = axis.contextScroll - axis.contextOffset
        waypoint.triggerPoint = Math.floor(elementOffset + contextModifier - adjustment)
        wasBeforeScroll = oldTriggerPoint < axis.oldScroll
        nowAfterScroll = waypoint.triggerPoint >= axis.oldScroll
        triggeredBackward = wasBeforeScroll && nowAfterScroll
        triggeredForward = !wasBeforeScroll && !nowAfterScroll

        if (!freshWaypoint && triggeredBackward) {
          waypoint.queueTrigger(axis.backward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (!freshWaypoint && triggeredForward) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
        else if (freshWaypoint && axis.oldScroll >= waypoint.triggerPoint) {
          waypoint.queueTrigger(axis.forward)
          triggeredGroups[waypoint.group.id] = waypoint.group
        }
      }
    }

    Waypoint.requestAnimationFrame(function() {
      for (var groupKey in triggeredGroups) {
        triggeredGroups[groupKey].flushTriggers()
      }
    })

    return this
  }

  /* Private */
  Context.findOrCreateByElement = function(element) {
    return Context.findByElement(element) || new Context(element)
  }

  /* Private */
  Context.refreshAll = function() {
    for (var contextId in contexts) {
      contexts[contextId].refresh()
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/context-find-by-element */
  Context.findByElement = function(element) {
    return contexts[element.waypointContextKey]
  }

  window.onload = function() {
    if (oldWindowLoad) {
      oldWindowLoad()
    }
    Context.refreshAll()
  }


  Waypoint.requestAnimationFrame = function(callback) {
    var requestFn = window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      requestAnimationFrameShim
    requestFn.call(window, callback)
  }
  Waypoint.Context = Context
}())
;(function() {
  'use strict'

  function byTriggerPoint(a, b) {
    return a.triggerPoint - b.triggerPoint
  }

  function byReverseTriggerPoint(a, b) {
    return b.triggerPoint - a.triggerPoint
  }

  var groups = {
    vertical: {},
    horizontal: {}
  }
  var Waypoint = window.Waypoint

  /* http://imakewebthings.com/waypoints/api/group */
  function Group(options) {
    this.name = options.name
    this.axis = options.axis
    this.id = this.name + '-' + this.axis
    this.waypoints = []
    this.clearTriggerQueues()
    groups[this.axis][this.name] = this
  }

  /* Private */
  Group.prototype.add = function(waypoint) {
    this.waypoints.push(waypoint)
  }

  /* Private */
  Group.prototype.clearTriggerQueues = function() {
    this.triggerQueues = {
      up: [],
      down: [],
      left: [],
      right: []
    }
  }

  /* Private */
  Group.prototype.flushTriggers = function() {
    for (var direction in this.triggerQueues) {
      var waypoints = this.triggerQueues[direction]
      var reverse = direction === 'up' || direction === 'left'
      waypoints.sort(reverse ? byReverseTriggerPoint : byTriggerPoint)
      for (var i = 0, end = waypoints.length; i < end; i += 1) {
        var waypoint = waypoints[i]
        if (waypoint.options.continuous || i === waypoints.length - 1) {
          waypoint.trigger([direction])
        }
      }
    }
    this.clearTriggerQueues()
  }

  /* Private */
  Group.prototype.next = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    var isLast = index === this.waypoints.length - 1
    return isLast ? null : this.waypoints[index + 1]
  }

  /* Private */
  Group.prototype.previous = function(waypoint) {
    this.waypoints.sort(byTriggerPoint)
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    return index ? this.waypoints[index - 1] : null
  }

  /* Private */
  Group.prototype.queueTrigger = function(waypoint, direction) {
    this.triggerQueues[direction].push(waypoint)
  }

  /* Private */
  Group.prototype.remove = function(waypoint) {
    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)
    if (index > -1) {
      this.waypoints.splice(index, 1)
    }
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/first */
  Group.prototype.first = function() {
    return this.waypoints[0]
  }

  /* Public */
  /* http://imakewebthings.com/waypoints/api/last */
  Group.prototype.last = function() {
    return this.waypoints[this.waypoints.length - 1]
  }

  /* Private */
  Group.findOrCreate = function(options) {
    return groups[options.axis][options.name] || new Group(options)
  }

  Waypoint.Group = Group
}())
;(function() {
  'use strict'

  var $ = window.jQuery
  var Waypoint = window.Waypoint

  function JQueryAdapter(element) {
    this.$element = $(element)
  }

  $.each([
    'innerHeight',
    'innerWidth',
    'off',
    'offset',
    'on',
    'outerHeight',
    'outerWidth',
    'scrollLeft',
    'scrollTop'
  ], function(i, method) {
    JQueryAdapter.prototype[method] = function() {
      var args = Array.prototype.slice.call(arguments)
      return this.$element[method].apply(this.$element, args)
    }
  })

  $.each([
    'extend',
    'inArray',
    'isEmptyObject'
  ], function(i, method) {
    JQueryAdapter[method] = $[method]
  })

  Waypoint.adapters.push({
    name: 'jquery',
    Adapter: JQueryAdapter
  })
  Waypoint.Adapter = JQueryAdapter
}())
;(function() {
  'use strict'

  var Waypoint = window.Waypoint

  function createExtension(framework) {
    return function() {
      var waypoints = []
      var overrides = arguments[0]

      if (framework.isFunction(arguments[0])) {
        overrides = framework.extend({}, arguments[1])
        overrides.handler = arguments[0]
      }

      this.each(function() {
        var options = framework.extend({}, overrides, {
          element: this
        })
        if (typeof options.context === 'string') {
          options.context = framework(this).closest(options.context)[0]
        }
        waypoints.push(new Waypoint(options))
      })

      return waypoints
    }
  }

  if (window.jQuery) {
    window.jQuery.fn.waypoint = createExtension(window.jQuery)
  }
  if (window.Zepto) {
    window.Zepto.fn.waypoint = createExtension(window.Zepto)
  }
}());

/*
* jquery-match-height 0.7.0 by @liabru
* http://brm.io/jquery-match-height/
* License MIT
*/
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=-1,o=-1,i=function(t){return parseFloat(t)||0},a=function(e){var o=1,a=t(e),n=null,r=[];return a.each(function(){var e=t(this),a=e.offset().top-i(e.css("margin-top")),s=r.length>0?r[r.length-1]:null;null===s?r.push(e):Math.floor(Math.abs(n-a))<=o?r[r.length-1]=s.add(e):r.push(e),n=a}),r},n=function(e){var o={
byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof e?t.extend(o,e):("boolean"==typeof e?o.byRow=e:"remove"===e&&(o.remove=!0),o)},r=t.fn.matchHeight=function(e){var o=n(e);if(o.remove){var i=this;return this.css(o.property,""),t.each(r._groups,function(t,e){e.elements=e.elements.not(i)}),this}return this.length<=1&&!o.target?this:(r._groups.push({elements:this,options:o}),r._apply(this,o),this)};r.version="0.7.0",r._groups=[],r._throttle=80,r._maintainScroll=!1,r._beforeUpdate=null,
r._afterUpdate=null,r._rows=a,r._parse=i,r._parseOptions=n,r._apply=function(e,o){var s=n(o),h=t(e),l=[h],c=t(window).scrollTop(),p=t("html").outerHeight(!0),d=h.parents().filter(":hidden");return d.each(function(){var e=t(this);e.data("style-cache",e.attr("style"))}),d.css("display","block"),s.byRow&&!s.target&&(h.each(function(){var e=t(this),o=e.css("display");"inline-block"!==o&&"flex"!==o&&"inline-flex"!==o&&(o="block"),e.data("style-cache",e.attr("style")),e.css({display:o,"padding-top":"0",
"padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),l=a(h),h.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||"")})),t.each(l,function(e,o){var a=t(o),n=0;if(s.target)n=s.target.outerHeight(!1);else{if(s.byRow&&a.length<=1)return void a.css(s.property,"");a.each(function(){var e=t(this),o=e.attr("style"),i=e.css("display");"inline-block"!==i&&"flex"!==i&&"inline-flex"!==i&&(i="block");var a={
display:i};a[s.property]="",e.css(a),e.outerHeight(!1)>n&&(n=e.outerHeight(!1)),o?e.attr("style",o):e.css("display","")})}a.each(function(){var e=t(this),o=0;s.target&&e.is(s.target)||("border-box"!==e.css("box-sizing")&&(o+=i(e.css("border-top-width"))+i(e.css("border-bottom-width")),o+=i(e.css("padding-top"))+i(e.css("padding-bottom"))),e.css(s.property,n-o+"px"))})}),d.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||null)}),r._maintainScroll&&t(window).scrollTop(c/p*t("html").outerHeight(!0)),
this},r._applyDataApi=function(){var e={};t("[data-match-height], [data-mh]").each(function(){var o=t(this),i=o.attr("data-mh")||o.attr("data-match-height");i in e?e[i]=e[i].add(o):e[i]=o}),t.each(e,function(){this.matchHeight(!0)})};var s=function(e){r._beforeUpdate&&r._beforeUpdate(e,r._groups),t.each(r._groups,function(){r._apply(this.elements,this.options)}),r._afterUpdate&&r._afterUpdate(e,r._groups)};r._update=function(i,a){if(a&&"resize"===a.type){var n=t(window).width();if(n===e)return;e=n;
}i?-1===o&&(o=setTimeout(function(){s(a),o=-1},r._throttle)):s(a)},t(r._applyDataApi),t(window).bind("load",function(t){r._update(!1,t)}),t(window).bind("resize orientationchange",function(t){r._update(!0,t)})});


{% comment %}$( ".custom__block-heading-text.h6" ).wrapInner( "<blockquote></blockquote>");{% endcomment %}
{% comment %}
$('#shopify-section-st-hero-1 p:contains("â")').html('<span class="sa-sptext">' + $('#shopify-section-st-hero-1 p:contains("â")').text() + '</span>');
$('#shopify-section-st-hero-3 p:contains("â")').html('<span class="sa-sptext">' + $('#shopify-section-st-hero-3 p:contains("â")').text() + '</span>');
$('#shopify-section-st-hero-6 p:contains("â")').html('<span class="sa-sptext">' + $('#shopify-section-st-hero-6 p:contains("â")').text() + '</span>');
{% endcomment %}

$('body p:contains("â")').each(
        function(index) {
            var $el = $(this);
            var html = $el.html();
            {% comment %}$el.html(html.replace(/Office Current Listings/g, "<h2>Office Current Listings</h2>"));{% endcomment %}
            $el.html('<span class="sa-sptext">' + $el.text() + '</span>');
    
});


$(".sa-sptext").parent().css( "text-align", "center" );


$("body p:contains('â')").html(function(_, html) {
   return  html.replace(/(â)/g, '<span class="sa-quote sa-quote-a">$1</span>')
});


$("body p:contains('â')").html(function(_, html) {
   return  html.replace(/(â)/g, '<span class="sa-quote sa-b-quote-b">$1</span>')
});

$("body h2:contains('â')").html(function(_, html) {
   return  html.replace(/(â)/g, '<span class="sa-quote sa-quote-a">$1</span>')
});

$("body h2:contains('â')").html(function(_, html) {
   return  html.replace(/(â)/g, '<span class="sa-quote sa-b-quote-b">$1</span>')
});


//TEXT SLIDER
function initialiseHomepageCarousel() {
    return $.Deferred(function(dfd) {
        var $slides = $('.sa-carousel-slide'),
            numSlides = $slides.length;
        console.log('Num Slides [' + numSlides + ']');
        $('.sa-carousel-slide-heading').each(function() {
            wrapCharacters($(this)[0]);
            $(this).find('.word').append('&nbsp;');
        });
        clearTimeout(homeCarouselSlidesTimeout);
        clearTimeout(homeCarouselRevealLettersTimeout);
            cycleSlides($slides, numSlides);
        return dfd.resolve();
    }).promise();
}


function revealLetters($el) {
    var $letters = $el.find('.letter:not(.visible)');
    if ($letters.length === 0) {
        return;
    }
    homeCarouselRevealLettersTimeout = setTimeout(function() {
        if (msieVersion <= 9 && msieVersion !== false) {
            $letters.first().fadeIn('fast');
        }
        $letters.first().addClass('visible');
        revealLetters($el);
    }, 75);
}
function wrapCharacters(element) {
    $(element).contents().each(function() {
        if (this.nodeType === 1) {
            wrapCharacters(this);
        } else if (this.nodeType === 3) {
            var str = $.trim(this.nodeValue);
            $(this).replaceWith($.map(str.split(''), function(c) {
                return '<span class="letter">' + c + '</span>';
            }).join(''));
        }
    });
}


function wrapCharacters(element) {
    $(element).contents().each(function() {
        if (this.nodeType === 1) {
            wrapCharacters(this);
        } else if (this.nodeType === 3) {
            var str = $.trim(this.nodeValue);
            $(this).replaceWith($.map(str.split(''), function(c) {
                return '<span class="letter">' + c + '</span>';
            }).join(''));
        }
    });
}
function cycleSlides($slides, numSlides) {
    var $curr = $('.sa-carousel-slide.active'),
        index = $slides.index($curr);
    if (index === numSlides - 1 || index === -1) {
        $next = $slides.first();
    } else {
        $next = $curr.next();
    }
    $next.addClass('active');
    $curr.removeClass('active').find('.letter').removeClass('visible');
    if (msieVersion <= 9 && msieVersion !== false) {
        $('.sa-carousel-slide .letter').removeClass('visible').hide();
    }
    revealLetters($next);
    if (numSlides === 1) {
        return;
    }
    homeCarouselSlidesTimeout = setTimeout(function() {
        cycleSlides($slides, numSlides);
    }, 5000);
}
var msieVersion = false;
var msieDetect = {
    init: function() {
        msieVersion = this.getVersion();
        if (!msieVersion)
            return;
        document.documentElement.className += ' msie msie-' + msieVersion;
    },
    getVersion: function() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf('MSIE ');
        if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\.?/)) {
            if (!!navigator.userAgent.match(/Trident.*rv\:11\.?/))
                return 11;
            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)));
        } else {
            return false;
        }
        return false;
    }
}
msieDetect.init();
var $window,
        $document,
        $body,
        documentHeight,
        viewportWidth,
        viewportHeight,
        page,
        resizeTimer,
        menuItemTimeout,
        homeCarouselSlidesTimeout, 
        homeCarouselRevealLettersTimeout;
initialiseHomepageCarousel();
// waypoint.js+animate.css
// =========================

// Philosophy page
  // $('#shopify-section-st-hero-2').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '65%'
  // });
  $('#shopify-section-st-hero-2 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });

  $('#shopify-section-st-gallery-1').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '75%'
  });
  $('#shopify-section-st-hero-1 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('#shopify-section-st-custom-content-2 .page-width').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });


  $('#shopify-section-st-custom-content-7 .custom-content > div').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-st-feature-row-1 .feature-row--st-feature-row-1 .feature-row__image-wrapper').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('#shopify-section-st-feature-row-1 .feature-row--st-feature-row-1 .feature-row__text').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });


  $('#shopify-section-st-hero-6 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });


    $('div#shopify-section-st-gallery-2').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
    $('#shopify-section-st-hero-3 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('div#shopify-section-st-gallery-3').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-st-hero-5 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-st-feature-row-2 .feature-row--st-feature-row-2 .feature-row__image-wrapper').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('#shopify-section-st-feature-row-2 .feature-row--st-feature-row-2 .feature-row__text').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });


// STORY PAGE
  $('#shopify-section-ph-feature-row-1 .feature-row--ph-feature-row-1 .feature-row__image-wrapper').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('#shopify-section-ph-feature-row-1 .feature-row--ph-feature-row-1 .feature-row__text').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });

  $('#shopify-section-ph-hero-1 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '75%'
  });

  $('#shopify-section-ph-custom-content-7 .custom-content > div:eq(0)').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ph-custom-content-7 .custom-content > div:eq(1)').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });


  $('#shopify-section-ph-hero-3 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ph-custom-content-3 .custom-content > div:eq(1)').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ph-custom-content-3 .custom-content > div:eq(0)').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });

  $('#shopify-section-ph-hero-4 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ph-hero-2 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });


// ABOUT

  $('div#shopify-section-ab-gallery-1 .image-bar__text').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ab-feature-row-1 .feature-row--ab-feature-row-1 .feature-row__image-wrapper').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '80%'
  });
  $('#shopify-section-ab-feature-row-1 .feature-row--ab-feature-row-1 .feature-row__text').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '80%'
  });

  $('#shopify-section-ab-hero-3 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ab-gallery-2 .as-custom-html-code').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '90%'
  });
  $('#shopify-section-ab-hero-5 .hero__inner').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('div#shopify-section-ab-hero-5 .as-custom-html-code').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });
  $('div#shopify-section-ab-gallery-3 .image-bar--ab-gallery-3 > div').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ab-feature-row-2 .feature-row--ab-feature-row-2 .feature-row__image-wrapper').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('#shopify-section-ab-feature-row-2 .feature-row--ab-feature-row-2 .feature-row__text').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ab-custom-content-1 .custom-content > div:eq(0)').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('#shopify-section-ab-custom-content-1 .custom-content > div:eq(1)').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });


  // PRODUCT PAGE

  $('div#shopify-section-product-video-popup .feature-row--product-video-popup .feature-row__image-wrapper').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '70%'
  });
  $('div#shopify-section-product-video-popup .feature-row--product-video-popup .feature-row__text').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('div#featured-slider-product-featured-slider .featured-slider__cover').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('div#featured-slider-product-featured-slider .featured-slider__slides-container').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });
  $('div#shopify-section-product-review .product-review--product-review .product-review__header').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });

  $('div#shopify-section-product-review .product-review--product-review .product-review__slider-wrapper').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '65%'
  });


// NEWS
  $('.blog-template .blog-tags').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '80%'
  });
  $('.blog-template header.section-header').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '80%'
  });
  $('.blog-template .blog-post-recent').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn")
    },
    offset: '80%'
  });



// HOME
  // $('div#shopify-section-slideshow').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '75%'
  // });

  // $('.featured-collection.collection-template h2.feature-row__heading').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '75%'
  // });
  // $('.featured-collection.collection-template .collection-feature-image').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '75%'
  // });
  // $('.featured-collection.collection-template .featured-collection__view-all').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '75%'
  // });
  // $('.index-section .feature-row').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '75%'
  // });
  // $('.shopify-section.index-section.index-section--custom-content .custom__item--1523369205555-1').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '85%'
  // });
  // $('.shopify-section.index-section.index-section--custom-content .custom__item--1523369205555-0 .custom__block-body-text').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '85%'
  // });
  //   $('.shopify-section.index-section.index-section--custom-content .custom__item--1523369205555-1').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '85%'
  // });
  //     $('.shopify-section.index-section.index-section--custom-content .custom-content-wrapper--1523370735943').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '85%'
  // });

  // $('div#shopify-section-gallery').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '75%'
  // });

  // $('.index-section .featured-blog').addClass('hidden').waypoint({
  //   handler: function() {
  //       $(this.element).addClass("visible animated fadeIn")
  //   },
  //   offset: '65%'
  // });



  
  $('span.sa-sptext').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });

  $('body p:contains("â")').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });
  
  $('body h2:contains("â")').addClass('hidden').waypoint({
    handler: function() {
        $(this.element).addClass("visible animated fadeIn ")
    },
    offset: '65%'
  });

 $('div#shopify-section-product-review .product-review__slide-container .product-review__testimonial').matchHeight();


setInterval(slideClick, 7000);
function slideClick(){
    if ($("button.slideshow__nav-dot:eq(0)").hasClass("slideshow__nav-dot--active")) {
        $("button.slideshow__nav-dot:eq(1)").click();
    }
    else if ($("button.slideshow__nav-dot:eq(1)").hasClass("slideshow__nav-dot--active")) {
        $("button.slideshow__nav-dot:eq(2)").click();
        $('.slideshow__slide').addClass("sa-slide");
    }
    else if ($("button.slideshow__nav-dot:eq(2)").hasClass("slideshow__nav-dot--active")) {
        $("button.slideshow__nav-dot:eq(0)").click();
        $('.slideshow__slide').addClass("sa-slide");
    }
  }




/*
@require
Jquery: https://jquery.com/
jquery-cookie: https://github.com/carhartl/jquery-cookie
Allows you to set a discount code via a URL and pass into shopify checkout
https://myshopifystore.com?coupon=MYCOUPONCODE
can append ?coupon=MYCOUPONCODE to any URL
*/

// Get paramaters from the URL
function getParameterByName(name, url) {
  if (!url) {
    url = window.location.href;
  }

  name = name.replace(/[\[\]]/g, "\\$&");
  var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
      results = regex.exec(url);
  if (!results) return null;
  if (!results[2]) return '';
  return decodeURIComponent(results[2].replace(/\+/g, " "));
}

// This must be added to your checkout form 
// <input class="js-form-discount" type="hidden" name="discount" value="RESELLERDISCOUNTCODE" >
$discountInput = $("input#js-form-discount");

// set cookie with passed in coupon code to any URL
$coupon = getParameterByName('coupon');

if($coupon){
  // set a cookie with the coupon code
  // Valid for 7 days : can adjust { expires: 7 } to whatever you want
  // single / is a session cookie
  Cookies.set('discountCode', $coupon, { expires: 7 });
}

// Get cookie discount code value and set form value
$discountCode = Cookies.get('discountCode');

if($discountCode){
  if ($discountInput.length > 0) { 
    // if cookie is set and discount input field is on page set its value to cookie val 
    $discountInput.val( $discountCode );
  }
}


// $('input:radio[name="checkout[shipping_rate][id]"][value="shopify-Free%20Shipping-0.00"]').prop('checked', false);
// $('input:radio[name="checkout[shipping_rate][id]"][value="shopify-Standard%20Shipping-7.50"]').prop('checked', true);
// element.style.display = "none";
// element.style..setProperty("display", "none", "important");

});